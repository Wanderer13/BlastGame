window.__require=function e(t,o,i){function r(s,c){if(!o[s]){if(!t[s]){var l=s.split("/");if(l=l[l.length-1],!t[l]){var a="function"==typeof __require&&__require;if(!c&&a)return a(l,!0);if(n)return n(l,!0);throw new Error("Cannot find module '"+s+"'")}s=l}var p=o[s]={exports:{}};t[s][0].call(p.exports,function(e){return r(t[s][1][e]||e)},p,p.exports,e,t,o,i)}return o[s].exports}for(var n="function"==typeof __require&&__require,s=0;s<i.length;s++)r(i[s]);return r}({Board:[function(e,t,o){"use strict";cc._RF.push(t,"843d6vJ/wdGIJi3W4zrWl7r","Board");var i=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<o;t++)for(var n=arguments[t],s=0,c=n.length;s<c;s++,r++)i[r]=n[s];return i};Object.defineProperty(o,"__esModule",{value:!0}),o.Board=void 0;var r=function(){function e(e,t,o){this.rows=e,this.cols=t,this.grid=o?o.map(function(e){return i(e)}):Array.from({length:e},function(){return Array(t).fill(null)})}return e.prototype.getTile=function(e){return this.isValidPosition(e)?this.grid[e.row][e.col]:null},e.prototype.setTile=function(e,t){this.isValidPosition(e)&&(this.grid[e.row][e.col]=t)},e.prototype.getConnectedGroup=function(e){var t,o=this,i=this.getTile(e);if(!i||e.row<0||e.col<0)return[];var r=Array.from({length:this.rows},function(){return Array(o.cols).fill(!1)}),n=[],s=[e];for(r[e.row][e.col]=!0;s.length>0;){var c=s.shift();n.push(c);for(var l=0,a=[{row:c.row-1,col:c.col},{row:c.row+1,col:c.col},{row:c.row,col:c.col-1},{row:c.row,col:c.col+1}];l<a.length;l++){var p=a[l];this.isValidPosition(p)&&!r[p.row][p.col]&&(null===(t=this.getTile(p))||void 0===t?void 0:t.equals(i))&&(r[p.row][p.col]=!0,s.push(p))}}return n.length>=2?n:[]},e.prototype.processExplosion=function(e){var t=this,o=i(e),r=new Set;e.forEach(function(e){t.setTile(e,null),r.add(e.col)});var n=[],s=[];return r.forEach(function(e){for(var o=[],i=t.rows-1;i>=0;i--)(l=t.grid[i][e])&&o.push({tile:l,originalRow:i});var r=0;for(i=t.rows-1;i>=0;i--)if(r<o.length){var c=o[r],l=c.tile,a=c.originalRow;a!==i&&n.push({tile:l,from:{row:a,col:e},to:{row:i,col:e}}),t.grid[i][e]=l,r++}else t.grid[i][e]=null,s.push({row:i,col:e})}),{removedPositions:o,movements:n,emptyPositions:s}},e.prototype.hasValidMove=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.cols;t++)if(this.grid[e][t]&&this.getConnectedGroup({row:e,col:t}).length>=2)return!0;return!1},e.prototype.isValidPosition=function(e){return e.row>=0&&e.row<this.rows&&e.col>=0&&e.col<this.cols},e.prototype.getGridState=function(){return this.grid.map(function(e){return i(e)})},e}();o.Board=r,cc._RF.pop()},{}],BombBoosterPanelView:[function(e,t,o){"use strict";cc._RF.push(t,"791c89h+UxG45BkuVX4grbj","BombBoosterPanelView");var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),n=this&&this.__decorate||function(e,t,o,i){var r,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(s=(n<3?r(s):n>3?r(t,o,s):r(t,o))||s);return n>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.BombBoosterPanelView=void 0;var s=cc._decorator,c=s.ccclass,l=s.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bombButton=null,t.bombCountLabel=null,t.bombIcon=null,t.onUseCallback=null,t.bombCount=0,t._isInteractable=!0,t}return r(t,e),t.prototype.onLoad=function(){this.bombButton&&this.bombButton.node.on(cc.Node.EventType.TOUCH_END,this.onBombClicked,this)},t.prototype.setInteractable=function(e){this._isInteractable=e,this.bombButton&&(this.bombButton.interactable=e&&this.bombCount>0)},t.prototype.isInteractable=function(){return this._isInteractable},t.prototype.updateCount=function(e){this.bombCount=e,this.bombCountLabel.string=e.toString(),this.bombButton&&(this.bombButton.interactable=this._isInteractable&&e>0)},t.prototype.setOnUse=function(e){this.onUseCallback=e},t.prototype.onBombClicked=function(){var e;this._isInteractable&&this.bombCount>0&&(null===(e=this.onUseCallback)||void 0===e||e.call(this))},t.prototype.onDestroy=function(){this.bombButton&&this.bombButton.node.off(cc.Node.EventType.TOUCH_END,this.onBombClicked,this)},n([l({type:cc.Button,displayName:"Bomb Button"})],t.prototype,"bombButton",void 0),n([l({type:cc.Label,displayName:"Bomb Count Label"})],t.prototype,"bombCountLabel",void 0),n([l({type:cc.Sprite,displayName:"Bomb Icon"})],t.prototype,"bombIcon",void 0),n([c],t)}(cc.Component);o.BombBoosterPanelView=a,cc._RF.pop()},{}],BombBooster:[function(e,t,o){"use strict";cc._RF.push(t,"443a2CDR3JFYKDclh11guin","BombBooster"),Object.defineProperty(o,"__esModule",{value:!0}),o.BombBooster=void 0;var i=function(){function e(e){void 0===e&&(e=1),this.radius=e}return e.prototype.getExplosionArea=function(e,t,o){for(var i=[],r=e.row-this.radius;r<=e.row+this.radius;r++)for(var n=e.col-this.radius;n<=e.col+this.radius;n++)Math.abs(r-e.row)+Math.abs(n-e.col)<=this.radius&&r>=0&&r<t&&n>=0&&n<o&&i.push({row:r,col:n});return i},e}();o.BombBooster=i,cc._RF.pop()},{}],FieldEvents:[function(e,t,o){"use strict";cc._RF.push(t,"989545smuRBKbpcBragozFs","FieldEvents"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],FieldView:[function(e,t,o){"use strict";cc._RF.push(t,"fbea6lGpnlLc6gJteUCvn8O","FieldView");var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),n=this&&this.__decorate||function(e,t,o,i){var r,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(s=(n<3?r(s):n>3?r(t,o,s):r(t,o))||s);return n>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.FieldView=void 0;var s=e("../Core/Boosters/TeleportModeState"),c=e("./Boosters/TeleportModeRenderer"),l=e("./TileView"),a=cc._decorator,p=a.ccclass,u=a.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tilePrefab=null,t.tilesContainer=null,t.teleportRenderer=null,t.tileViews=[],t.board=null,t.events=null,t.isProcessing=!1,t._isBlocked=!1,t.bombModeActive=!1,t.teleportModeActive=!1,t.teleportModeState=null,t}return r(t,e),t.prototype.isBlocked=function(){return this._isBlocked},t.prototype.initialize=function(e,t){this.board=e,this.events=t,this.tileViews=Array.from({length:e.rows},function(){return[]}),this.teleportRenderer&&this.teleportRenderer.initialize(e.rows,e.cols,this.node.width/e.cols),this.renderBoard()},t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_END,function(e){e.stopPropagation()},this)},t.prototype.onDestroy=function(){for(var e,t,o=0;o<this.tileViews.length;o++)for(var i=0;i<((null===(e=this.tileViews[o])||void 0===e?void 0:e.length)||0);i++){var r=null===(t=this.tileViews[o])||void 0===t?void 0:t[i];r&&r.node.off(cc.Node.EventType.TOUCH_END,this.onTileClickDynamic,this)}},t.prototype.renderBoard=function(){this.clearAllTiles();for(var e=this.board.getGridState(),t=0;t<this.board.rows;t++)for(var o=0;o<this.board.cols;o++){var i=e[t][o];i&&this.createTileView(i,{row:t,col:o})}},t.prototype.createTileView=function(e,t){if(!e)return cc.error("Cannot create view for null tile at ["+t.row+","+t.col+"]"),null;var o=cc.instantiate(this.tilePrefab);o.parent=this.tilesContainer,o.name="Tile_"+t.row+"_"+t.col,o.active=!0;var i=this.node.width/this.board.cols,r=.1*i;o.setContentSize(cc.size(r,r)),o.setAnchorPoint(cc.v2(.5,.5));var n=this.node.width/2,s=this.node.height/2,c=i/2-n+t.col*i,a=s-i/2-t.row*i;o.setPosition(c,a),o.scale=1;var p=o.getComponent(l.TileView);return p?(p.initialize(e,t),this.tileViews[t.row]||(this.tileViews[t.row]=Array(this.board.cols).fill(void 0)),this.tileViews[t.row][t.col]=p,this.setupClickHandler(p),p):(cc.error("Tile prefab missing TileView component at ["+t.row+","+t.col+"]"),o.destroy(),null)},t.prototype.setupClickHandler=function(e){e.node.off(cc.Node.EventType.TOUCH_END,this.onTileClickDynamic,this),e.node.on(cc.Node.EventType.TOUCH_END,this.onTileClickDynamic,this)},t.prototype.onTileClickDynamic=function(e){var t;if(e.stopPropagation(),!this.isProcessing&&!this._isBlocked&&this.board){for(var o=null,i=0;i<this.board.rows;i++){for(var r=0;r<this.board.cols;r++){var n=null===(t=this.tileViews[i])||void 0===t?void 0:t[r];if(n&&n.node===e.target){o={row:i,col:r};break}}if(o)break}o?this.bombModeActive?this.handleBombModeClick(o):this.teleportModeActive&&this.teleportModeState?this.handleTeleportModeClick(o):this.board.getTile(o)&&this.events&&this.events.onTileClicked(o):cc.warn("Clicked node not found in tileViews grid")}},t.prototype.animateExplosion=function(e,t){var o=this;if(this._isBlocked||this.isProcessing)null==t||t();else if(0!==e.length){this.isProcessing=!0;var i=0,r=[];e.forEach(function(e){var t,i=null===(t=o.tileViews[e.row])||void 0===t?void 0:t[e.col];i&&(o.tileViews[e.row][e.col]=void 0,r.push(i))});var n=function(){var e;++i===r.length&&(o.isProcessing=!1,null===(e=o.events)||void 0===e||e.onExplosionComplete(),null==t||t())};r.forEach(function(e){return e.animateExplosion(n)})}else null==t||t()},t.prototype.animateGravity=function(e,t,o){var i,r=this;if(!this.isProcessing){this.isProcessing=!0;var n=[];if(e.forEach(function(e){var t,o=null===(t=r.tileViews[e.from.row])||void 0===t?void 0:t[e.from.col];if(o){r.tileViews[e.from.row][e.from.col]=void 0,r.tileViews[e.to.row][e.to.col]=o,o.updatePosition(e.to);var i=new Promise(function(t){var i=r.node.width/r.board.cols,n=r.node.height/2-i/2-e.to.row*i,s=cc.sequence(cc.moveTo(.3,o.node.x,n),cc.callFunc(function(){return t()}));o.node.stopAllActions(),o.node.runAction(s)});n.push(i)}}),t.forEach(function(e){var t=e.pos,o=e.tile,i=r.createTileView(o,t),s=new Promise(function(e){var o=r.node.width/r.board.cols,n=r.node.height/2-o/2-t.row*o;i.node.y=n+400,i.node.opacity=0,i.node.active=!0;var s=cc.sequence(cc.spawn(cc.moveTo(.4,i.node.x,n),cc.fadeIn(.4)),cc.callFunc(function(){return e()}));i.node.runAction(s)});n.push(s)}),0===n.length)return this.isProcessing=!1,null===(i=this.events)||void 0===i||i.onTileDropped(),void(null==o||o());Promise.all(n).then(function(){var e;r.isProcessing=!1,null===(e=r.events)||void 0===e||e.onTileDropped(),null==o||o()})}},t.prototype.highlightGroup=function(e,t){var o=this;e.forEach(function(e){var i,r=null===(i=o.tileViews[e.row])||void 0===i?void 0:i[e.col];r&&r.highlight(t)})},t.prototype.clearAllTiles=function(){for(var e=this,t=this.tilesContainer.childrenCount-1;t>=0;t--)this.tilesContainer.children[t].destroy();this.tilesContainer.removeAllChildren(),this.tileViews=Array.from({length:this.board.rows},function(){return Array(e.board.cols).fill(void 0)})},t.prototype.isBusy=function(){return this.isProcessing},t.prototype.blockInput=function(){this._isBlocked=!0,this.node.opacity=150},t.prototype.unblockInput=function(){this._isBlocked=!1,this.node.opacity=255},t.prototype.enterBombMode=function(){this._isBlocked||this.isProcessing||(this.bombModeActive=!0,this.teleportModeActive=!1,this.node.color=cc.Color.YELLOW,this.node.opacity=200)},t.prototype.exitBombMode=function(){this.bombModeActive=!1,this.node.color=cc.Color.WHITE,this.node.opacity=255},t.prototype.enterTeleportMode=function(e){this._isBlocked||this.isProcessing||(this.teleportModeActive=!0,this.bombModeActive=!1,this.teleportModeState=e,this.node.color=cc.Color.CYAN,this.node.opacity=200,this.teleportRenderer&&(this.teleportRenderer.node.active=!0))},t.prototype.exitTeleportMode=function(){this.teleportModeActive=!1,this.teleportModeState&&(this.teleportModeState.reset(),this.teleportModeState=null),this.node.color=cc.Color.WHITE,this.node.opacity=255,this.teleportRenderer&&this.teleportRenderer.hide()},t.prototype.handleBombModeClick=function(e){var t;this.exitBombMode(),(null===(t=this.events)||void 0===t?void 0:t.onBombPlaced)&&this.events.onBombPlaced(e)},t.prototype.handleTeleportModeClick=function(e){var t,o=this;if(this.teleportModeState&&this.teleportRenderer){var i=this.teleportModeState.getState();if(i===s.TeleportState.WAITING_FIRST)this.teleportModeState.selectFirst(e)&&this.teleportRenderer.highlightSelection(e,null);else if(i===s.TeleportState.WAITING_SECOND){if(!this.teleportModeState.getFirstTile())return void cc.warn("No first tile found in WAITING_SECOND state");if(!this.teleportModeState.selectSecond(e))return void cc.warn("Failed to select second tile");var r=this.teleportModeState.getSelection();if(!r)return void cc.warn("No selection after second tile");this.teleportRenderer.highlightSelection(r.first,r.second),(null===(t=this.events)||void 0===t?void 0:t.onTeleportReady)&&this.events.onTeleportReady(r),this.scheduleOnce(function(){o.exitTeleportMode()},.3)}}},t.prototype.animateBombExplosion=function(e,t){var o=this;if(this._isBlocked||this.isProcessing)null==t||t();else if(0!==e.length){this.isProcessing=!0;var i=0,r=[];e.forEach(function(e){var t,i=null===(t=o.tileViews[e.row])||void 0===t?void 0:t[e.col];i&&(o.tileViews[e.row][e.col]=void 0,r.push(i))}),r.forEach(function(e,n){var s=.03*n;e.node.runAction(cc.sequence(cc.delayTime(s),cc.spawn(cc.scaleTo(.2,1.5),cc.fadeOut(.2)),cc.callFunc(function(){e.clear(),++i===r.length&&(o.isProcessing=!1,null==t||t())})))})}else null==t||t()},t.prototype.animateTileSwap=function(e,t,o){var i,r,n=this;if(this._isBlocked||this.isProcessing)null==o||o();else{var s=null===(i=this.tileViews[e.row])||void 0===i?void 0:i[e.col],c=null===(r=this.tileViews[t.row])||void 0===r?void 0:r[t.col];if(s&&c){this.isProcessing=!0;var l=this.node.width/this.board.cols,a=this.node.width/2,p=this.node.height/2,u={x:l/2-a+e.col*l,y:p-l/2-e.row*l},h={x:l/2-a+t.col*l,y:p-l/2-t.row*l};this.tileViews[e.row][e.col]=c,this.tileViews[t.row][t.col]=s,s.updatePosition(t),c.updatePosition(e);var d=cc.sequence(cc.moveTo(.3,h.x,h.y),cc.callFunc(function(){o&&o()})),f=cc.sequence(cc.moveTo(.3,u.x,u.y),cc.callFunc(function(){}));s.node.stopAllActions(),c.node.stopAllActions(),s.node.runAction(d),c.node.runAction(f),this.scheduleOnce(function(){n.isProcessing=!1},.3)}else null==o||o()}},t.prototype.isBombModeActive=function(){return this.bombModeActive},t.prototype.isTeleportModeActive=function(){return this.teleportModeActive},n([u({type:cc.Prefab,displayName:"Tile Prefab"})],t.prototype,"tilePrefab",void 0),n([u({type:cc.Node,displayName:"Tiles Container"})],t.prototype,"tilesContainer",void 0),n([u({type:c.TeleportModeRenderer,displayName:"Teleport Renderer"})],t.prototype,"teleportRenderer",void 0),n([p],t)}(cc.Component);o.FieldView=h,cc._RF.pop()},{"../Core/Boosters/TeleportModeState":"TeleportModeState","./Boosters/TeleportModeRenderer":"TeleportModeRenderer","./TileView":"TileView"}],GameConfig:[function(e,t,o){"use strict";cc._RF.push(t,"fbf12BluNREnp/0pnUd2Y0T","GameConfig"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],GameController:[function(e,t,o){"use strict";cc._RF.push(t,"e5e7bISCx5DkLCMKWm3h8pe","GameController");var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),n=this&&this.__decorate||function(e,t,o,i){var r,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(s=(n<3?r(s):n>3?r(t,o,s):r(t,o))||s);return n>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.GameController=void 0;var s=e("../Core/Board"),c=e("../Core/Boosters/BombBooster"),l=e("../Core/Boosters/TeleportBooster"),a=e("../Core/Boosters/TeleportModeState"),p=e("../Core/GameRules"),u=e("../Core/Tile"),h=e("../View/Boosters/BombBoosterPanelView"),d=e("../View/Boosters/TeleportBoosterPanelView"),f=e("../View/Boosters/TeleportModeRenderer"),y=e("../View/FieldView"),v=e("../View/LoseScreenView"),b=e("../View/UIManager"),w=e("../View/WinScreenView"),g=cc._decorator,m=g.ccclass,_=g.property,B=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rows=8,t.cols=8,t.targetScore=200,t.maxMoves=20,t.fieldView=null,t.uiManager=null,t.winScreenView=null,t.loseScreenView=null,t.bombBoosterCount=3,t.teleportBoosterCount=3,t.bombBoosterPanel=null,t.teleportBoosterPanel=null,t.teleportModeRenderer=null,t.board=null,t.gameRules=null,t.selectedGroup=[],t.isProcessingAction=!1,t.bombBooster=new c.BombBooster(1),t.teleportBooster=new l.TeleportBooster,t.teleportModeState=new a.TeleportModeState,t.bombCount=0,t.teleportCount=0,t}return r(t,e),t.prototype.onLoad=function(){this.initializeGame()},t.prototype.initializeGame=function(){var e=this;this.winScreenView.hide(),this.loseScreenView.hide(),this.fieldView.unblockInput(),this.bombCount=this.bombBoosterCount,this.teleportCount=this.teleportBoosterCount,this.setBoostersInteractable(!1);var t={rows:this.rows,cols:this.cols,targetScore:this.targetScore,maxMoves:this.maxMoves,bombBoosterCount:this.bombBoosterCount,teleportBoosterCount:this.teleportBoosterCount};this.board=new s.Board(this.rows,this.cols),this.gameRules=new p.GameRules(t),this.fillBoardRandomly();var o={onTileClicked:this.onTileClicked.bind(this),onExplosionComplete:this.onExplosionComplete.bind(this),onTileDropped:this.onTileDropped.bind(this),onBombPlaced:this.onBombPlaced.bind(this),onTeleportReady:this.onTeleportReady.bind(this)};this.fieldView.initialize(this.board,o),this.winScreenView.setOnPlayAgain(function(){return e.restartGame()}),this.loseScreenView.setOnRetry(function(){return e.restartGame()}),this.bombBoosterPanel.setOnUse(function(){return e.activateBombMode()}),this.teleportBoosterPanel.setOnUse(function(){return e.activateTeleportMode()}),this.updateUI(),this.updateBoosterUI(),this.setBoostersInteractable(!0)},t.prototype.fillBoardRandomly=function(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.cols;t++){var o=u.Tile.createRandom();this.board.setTile({row:e,col:t},o)}this.board.hasValidMove()||this.fillBoardRandomly()},t.prototype.onTileClicked=function(e){var t=this;if(this.board&&this.gameRules&&!this.fieldView.isBusy()&&!this.isProcessingAction){var o=this.board.getConnectedGroup(e);o.length<2||(this.selectedGroup=o,this.fieldView.highlightGroup(o,!0),this.fieldView.animateExplosion(o,function(){t.processExplosionLogic()}))}},t.prototype.processExplosionLogic=function(){var e=this;if(this.board&&this.gameRules&&0!==this.selectedGroup.length){this.gameRules.processValidExplosion(this.selectedGroup.length);var t=this.board.processExplosion(this.selectedGroup),o=t.movements,i=t.emptyPositions;this.selectedGroup=[];var r=[];i.forEach(function(t){var o=u.Tile.createRandom();e.board.setTile(t,o),r.push({pos:t,tile:o})}),this.updateUI(),this.fieldView.animateGravity(o,r,function(){e.checkGameStateAfterAction()})}},t.prototype.onExplosionComplete=function(){},t.prototype.onTileDropped=function(){},t.prototype.checkGameStateAfterAction=function(){if(this.gameRules&&this.board&&!this.fieldView.isBlocked())return this.gameRules.isWinCondition()?(this.fieldView.blockInput(),void this.winScreenView.show(this.gameRules.getScore())):this.gameRules.isLoseCondition(this.board.hasValidMove())?(this.fieldView.blockInput(),void this.loseScreenView.show(this.gameRules.getScore())):void this.setBoostersInteractable(!0)},t.prototype.updateUI=function(){this.gameRules&&this.uiManager&&(this.uiManager.updateScore(this.gameRules.getScore(),this.gameRules.getTargetScore()),this.uiManager.updateMoves(this.gameRules.getMovesLeft()))},t.prototype.updateBoosterUI=function(){this.bombBoosterPanel.updateCount(this.bombCount),this.teleportBoosterPanel.updateCount(this.teleportCount)},t.prototype.restartGame=function(){this.winScreenView.hide(),this.loseScreenView.hide(),this.fieldView.unblockInput(),this.fieldView.exitBombMode(),this.fieldView.exitTeleportMode(),this.teleportModeRenderer.hide(),this.teleportModeState.reset(),this.isProcessingAction=!1,this.selectedGroup=[],this.gameRules.reset(),this.initializeGame()},t.prototype.activateBombMode=function(){var e,t,o,i;(null===(t=(e=this.fieldView).isBombModeActive)||void 0===t?void 0:t.call(e))||(null===(i=(o=this.fieldView).isTeleportModeActive)||void 0===i?void 0:i.call(o))||this.isProcessingAction||this.fieldView.isBlocked()||this.bombCount<=0||(this.setBoostersInteractable(!1),this.bombCount--,this.updateBoosterUI(),this.fieldView.enterBombMode())},t.prototype.onBombPlaced=function(e){var t=this;if(this.board&&this.gameRules&&!this.isProcessingAction){this.isProcessingAction=!0;var o=this.bombBooster.getExplosionArea(e,this.board.rows,this.board.cols).filter(function(e){return null!==t.board.getTile(e)});if(0===o.length)return this.gameRules.processValidExplosion(0),this.updateUI(),this.isProcessingAction=!1,this.checkGameStateAfterAction(),void this.setBoostersInteractable(!0);this.fieldView.animateBombExplosion(o,function(){t.processBombExplosion(o)})}},t.prototype.processBombExplosion=function(e){var t=this;if(!this.board||!this.gameRules)return this.isProcessingAction=!1,void this.setBoostersInteractable(!0);var o=e.length;this.gameRules.processValidExplosion(o),this.updateUI();var i=this.board.processExplosion(e),r=i.movements,n=i.emptyPositions,s=[];n.forEach(function(e){var o=u.Tile.createRandom();t.board.setTile(e,o),s.push({pos:e,tile:o})}),this.fieldView.animateGravity(r,s,function(){t.isProcessingAction=!1,t.checkGameStateAfterAction(),t.setBoostersInteractable(!0)})},t.prototype.activateTeleportMode=function(){var e,t,o,i;(null===(t=(e=this.fieldView).isTeleportModeActive)||void 0===t?void 0:t.call(e))||(null===(i=(o=this.fieldView).isBombModeActive)||void 0===i?void 0:i.call(o))||this.isProcessingAction||this.fieldView.isBlocked()||this.teleportCount<=0||(this.setBoostersInteractable(!1),this.teleportCount--,this.updateBoosterUI(),this.teleportModeState=new a.TeleportModeState,this.teleportModeState.activate(),this.fieldView.enterTeleportMode(this.teleportModeState))},t.prototype.executeTeleportSwap=function(e,t){var o=this;if(this.board&&this.gameRules&&!this.isProcessingAction){if(this.isProcessingAction=!0,!this.teleportBooster.isValidSwap(e,t,this.board.rows,this.board.cols))return this.isProcessingAction=!1,void this.setBoostersInteractable(!0);var i=this.board.getTile(e),r=this.board.getTile(t);if(!i||!r)return cc.warn("Cannot swap: one or both positions are empty"),this.isProcessingAction=!1,void this.setBoostersInteractable(!0);this.board.setTile(e,r),this.board.setTile(t,i),this.fieldView.animateTileSwap(e,t,function(){o.gameRules.processValidExplosion(0),o.updateUI();var i=o.board.getConnectedGroup(e),r=o.board.getConnectedGroup(t);i.length>=2||r.length,o.isProcessingAction=!1,o.checkGameStateAfterAction(),o.setBoostersInteractable(!0)})}else this.setBoostersInteractable(!0)},t.prototype.onTeleportReady=function(e){var t=this;this.board&&this.gameRules&&!this.isProcessingAction&&this.scheduleOnce(function(){t.executeTeleportSwap(e.first,e.second)},.2)},t.prototype.setBoostersInteractable=function(e){var t=e&&!this.fieldView.isBlocked()&&!this.isProcessingAction;this.bombBoosterPanel.setInteractable(t),this.teleportBoosterPanel.setInteractable(t)},n([_({type:cc.Integer,displayName:"Rows",min:4,max:12})],t.prototype,"rows",void 0),n([_({type:cc.Integer,displayName:"Columns",min:4,max:12})],t.prototype,"cols",void 0),n([_({type:cc.Integer,displayName:"Target Score",min:50,max:500})],t.prototype,"targetScore",void 0),n([_({type:cc.Integer,displayName:"Max Moves",min:5,max:50})],t.prototype,"maxMoves",void 0),n([_({type:y.FieldView,displayName:"Field View"})],t.prototype,"fieldView",void 0),n([_({type:b.UIManager,displayName:"UI Manager"})],t.prototype,"uiManager",void 0),n([_({type:w.WinScreenView,displayName:"Win Screen View"})],t.prototype,"winScreenView",void 0),n([_({type:v.LoseScreenView,displayName:"Lose Screen View"})],t.prototype,"loseScreenView",void 0),n([_({type:cc.Integer,displayName:"Bomb Booster"})],t.prototype,"bombBoosterCount",void 0),n([_({type:cc.Integer,displayName:"Teleport Booster"})],t.prototype,"teleportBoosterCount",void 0),n([_({type:h.BombBoosterPanelView})],t.prototype,"bombBoosterPanel",void 0),n([_({type:d.TeleportBoosterPanelView})],t.prototype,"teleportBoosterPanel",void 0),n([_({type:f.TeleportModeRenderer})],t.prototype,"teleportModeRenderer",void 0),n([m],t)}(cc.Component);o.GameController=B,cc._RF.pop()},{"../Core/Board":"Board","../Core/Boosters/BombBooster":"BombBooster","../Core/Boosters/TeleportBooster":"TeleportBooster","../Core/Boosters/TeleportModeState":"TeleportModeState","../Core/GameRules":"GameRules","../Core/Tile":"Tile","../View/Boosters/BombBoosterPanelView":"BombBoosterPanelView","../View/Boosters/TeleportBoosterPanelView":"TeleportBoosterPanelView","../View/Boosters/TeleportModeRenderer":"TeleportModeRenderer","../View/FieldView":"FieldView","../View/LoseScreenView":"LoseScreenView","../View/UIManager":"UIManager","../View/WinScreenView":"WinScreenView"}],GameRules:[function(e,t,o){"use strict";cc._RF.push(t,"42377ymvMBEsJciuMpqdlTP","GameRules"),Object.defineProperty(o,"__esModule",{value:!0}),o.GameRules=void 0;var i=function(){function e(e){this.score=0,this.movesLeft=0,this.bombBoosterCount=0,this.teleportBoosterCount=0,this.config=e,this.movesLeft=e.maxMoves,this.bombBoosterCount=e.bombBoosterCount,this.teleportBoosterCount=e.teleportBoosterCount}return e.prototype.processValidExplosion=function(e){this.score+=e,this.movesLeft--},e.prototype.getScore=function(){return this.score},e.prototype.getMovesLeft=function(){return this.movesLeft},e.prototype.getTargetScore=function(){return this.config.targetScore},e.prototype.isWinCondition=function(){return this.score>=this.config.targetScore},e.prototype.isLoseCondition=function(e){return this.movesLeft<=0||!e},e.prototype.reset=function(){this.score=0,this.movesLeft=this.config.maxMoves,this.bombBoosterCount=this.config.bombBoosterCount,this.teleportBoosterCount=this.config.teleportBoosterCount},e}();o.GameRules=i,cc._RF.pop()},{}],LoseScreenView:[function(e,t,o){"use strict";cc._RF.push(t,"2e99dGvpW1JDJI6BkA4ogcV","LoseScreenView");var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),n=this&&this.__decorate||function(e,t,o,i){var r,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(s=(n<3?r(s):n>3?r(t,o,s):r(t,o))||s);return n>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.LoseScreenView=void 0;var s=cc._decorator,c=s.ccclass,l=s.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scoreLabel=null,t.retryButton=null,t.onRetryCallback=null,t}return r(t,e),t.prototype.onLoad=function(){this.retryButton&&this.retryButton.node.on(cc.Node.EventType.TOUCH_END,this.onRetryClicked,this)},t.prototype.show=function(e){this.scoreLabel.string=e.toString(),this.node.active=!0},t.prototype.hide=function(){this.node.active=!1},t.prototype.setOnRetry=function(e){this.onRetryCallback=e},t.prototype.onRetryClicked=function(){var e;null===(e=this.onRetryCallback)||void 0===e||e.call(this)},t.prototype.onDestroy=function(){this.retryButton&&this.retryButton.node.off(cc.Node.EventType.TOUCH_END,this.onRetryClicked,this)},n([l({type:cc.Label,displayName:"Score Label"})],t.prototype,"scoreLabel",void 0),n([l({type:cc.Button,displayName:"Retry Button"})],t.prototype,"retryButton",void 0),n([c],t)}(cc.Component);o.LoseScreenView=a,cc._RF.pop()},{}],Position:[function(e,t,o){"use strict";cc._RF.push(t,"ee2aeQjxjxPGLFEFVPT71z+","Position"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],TeleportBoosterPanelView:[function(e,t,o){"use strict";cc._RF.push(t,"9efee0Ds3FFLZ2pWwV2rjh0","TeleportBoosterPanelView");var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),n=this&&this.__decorate||function(e,t,o,i){var r,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(s=(n<3?r(s):n>3?r(t,o,s):r(t,o))||s);return n>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.TeleportBoosterPanelView=void 0;var s=cc._decorator,c=s.ccclass,l=s.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.teleportButton=null,t.teleportCountLabel=null,t.teleportIcon=null,t.onUseCallback=null,t.teleportCount=0,t._isInteractable=!0,t}return r(t,e),t.prototype.onLoad=function(){this.teleportButton&&this.teleportButton.node.on(cc.Node.EventType.TOUCH_END,this.onTeleportClicked,this)},t.prototype.setInteractable=function(e){this._isInteractable=e,this.teleportButton&&(this.teleportButton.interactable=e&&this.teleportCount>0)},t.prototype.isInteractable=function(){return this._isInteractable},t.prototype.updateCount=function(e){this.teleportCount=e,this.teleportCountLabel.string=e.toString(),this.teleportButton&&(this.teleportButton.interactable=this._isInteractable&&e>0)},t.prototype.setOnUse=function(e){this.onUseCallback=e},t.prototype.onTeleportClicked=function(){var e;this._isInteractable&&this.teleportCount>0&&(null===(e=this.onUseCallback)||void 0===e||e.call(this))},t.prototype.onDestroy=function(){this.teleportButton&&this.teleportButton.node.off(cc.Node.EventType.TOUCH_END,this.onTeleportClicked,this)},n([l({type:cc.Button,displayName:"Teleport Button"})],t.prototype,"teleportButton",void 0),n([l({type:cc.Label,displayName:"Teleport Count Label"})],t.prototype,"teleportCountLabel",void 0),n([l({type:cc.Sprite,displayName:"Teleport Icon"})],t.prototype,"teleportIcon",void 0),n([c],t)}(cc.Component);o.TeleportBoosterPanelView=a,cc._RF.pop()},{}],TeleportBooster:[function(e,t,o){"use strict";cc._RF.push(t,"792e9m3VCxD0alqz9F+XkZD","TeleportBooster"),Object.defineProperty(o,"__esModule",{value:!0}),o.TeleportBooster=void 0;var i=function(){function e(){}return e.prototype.isValidSwap=function(e,t,o,i){return!(e.row===t.row&&e.col===t.col)&&e.row>=0&&e.row<o&&e.col>=0&&e.col<i&&t.row>=0&&t.row<o&&t.col>=0&&t.col<i},e}();o.TeleportBooster=i,cc._RF.pop()},{}],TeleportModeRenderer:[function(e,t,o){"use strict";cc._RF.push(t,"d2189GNkYBDnoFNdqH4zHfs","TeleportModeRenderer");var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),n=this&&this.__decorate||function(e,t,o,i){var r,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(s=(n<3?r(s):n>3?r(t,o,s):r(t,o))||s);return n>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.TeleportModeRenderer=void 0;var s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.graphics=null,t.cellSize=80,t}return r(t,e),t.prototype.initialize=function(e,t,o){this.cellSize=o,this.createGraphics()},t.prototype.createGraphics=function(){var e=new cc.Node("TeleportPreview");e.parent=this.node,e.zIndex=999,this.graphics=e.addComponent(cc.Graphics),this.graphics.node.active=!1},t.prototype.highlightSelection=function(e,t){this.graphics&&(this.graphics.clear(),this.graphics.node.active=!0,this.drawHighlight(e,cc.Color.YELLOW,1),t&&(this.drawHighlight(t,cc.Color.GREEN,2),this.drawArrow(e,t)))},t.prototype.drawHighlight=function(e,t,o){var i=this.getTilePosition(e),r=i.x,n=i.y;this.graphics.fillColor=t,this.graphics.strokeColor=cc.Color.BLACK,this.graphics.lineWidth=3,this.graphics.rect(r-this.cellSize/2+2,n-this.cellSize/2+2,this.cellSize-4,this.cellSize-4),this.graphics.fill(),this.graphics.stroke();var s=new cc.Node;s.addComponent(cc.Label);var c=s.getComponent(cc.Label);c.string=o.toString(),c.fontSize=40,c.node.parent=this.graphics.node,c.node.setPosition(cc.v2(r,n)),c.node.color=cc.Color.BLACK},t.prototype.drawArrow=function(e,t){var o=this.getTilePosition(e),i=this.getTilePosition(t);this.graphics.strokeColor=cc.Color.WHITE,this.graphics.lineWidth=8,this.graphics.moveTo(o.x,o.y),this.graphics.lineTo(i.x,i.y),this.graphics.stroke()},t.prototype.getTilePosition=function(e){var t=this.node.width/2,o=this.node.height/2;return{x:-t+this.cellSize/2+e.col*this.cellSize,y:o-this.cellSize/2-e.row*this.cellSize}},t.prototype.hide=function(){this.graphics&&(this.graphics.clear(),this.graphics.node.active=!1)},n([c],t)}(cc.Component));o.TeleportModeRenderer=l,cc._RF.pop()},{}],TeleportModeState:[function(e,t,o){"use strict";var i;cc._RF.push(t,"eac72FE+G9CQZd8DJTiRE2T","TeleportModeState"),Object.defineProperty(o,"__esModule",{value:!0}),o.TeleportModeState=o.TeleportState=void 0,function(e){e.INACTIVE="inactive",e.WAITING_FIRST="waiting_first",e.WAITING_SECOND="waiting_second",e.COMPLETED="completed"}(i=o.TeleportState||(o.TeleportState={}));var r=function(){function e(){this.state=i.INACTIVE,this.first=null,this.second=null}return e.prototype.getState=function(){return this.state},e.prototype.activate=function(){return this.state===i.INACTIVE&&(this.state=i.WAITING_FIRST,this.first=this.second=null,!0)},e.prototype.selectFirst=function(e){return this.state===i.WAITING_FIRST&&(this.first=e,this.state=i.WAITING_SECOND,!0)},e.prototype.selectSecond=function(e){return this.state===i.WAITING_SECOND&&(this.second=e,this.state=i.COMPLETED,!0)},e.prototype.isReady=function(){return this.state===i.COMPLETED&&null!==this.first&&null!==this.second},e.prototype.getSelection=function(){return this.isReady()?{first:this.first,second:this.second}:null},e.prototype.getFirstTile=function(){return this.first},e.prototype.reset=function(){this.state=i.INACTIVE,this.first=this.second=null},e}();o.TeleportModeState=r,cc._RF.pop()},{}],TileColor:[function(e,t,o){"use strict";cc._RF.push(t,"34948B3FHBNcpfFMKOX1/0i","TileColor"),Object.defineProperty(o,"__esModule",{value:!0}),o.TileColor=void 0,function(e){e.RED="red",e.BLUE="blue",e.GREEN="green",e.YELLOW="yellow",e.PURPLE="purple"}(o.TileColor||(o.TileColor={})),cc._RF.pop()},{}],TileMovement:[function(e,t,o){"use strict";cc._RF.push(t,"6f2f3ZN0YFOzaP2R+xoZqcO","TileMovement"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],TileView:[function(e,t,o){"use strict";cc._RF.push(t,"76830QekmRPsK3A7Nq+DkQt","TileView");var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),n=this&&this.__decorate||function(e,t,o,i){var r,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(s=(n<3?r(s):n>3?r(t,o,s):r(t,o))||s);return n>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.TileView=void 0;var s=e("../Core/TileColor"),c=cc._decorator,l=c.ccclass,a=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spriteRed=null,t.spriteBlue=null,t.spriteGreen=null,t.spriteYellow=null,t.spritePurple=null,t.sprite=null,t.tileData=null,t.position={row:-1,col:-1},t}return r(t,e),t.prototype.onLoad=function(){this.sprite=this.getComponent(cc.Sprite)},t.prototype.initialize=function(e,t){this.tileData=e,this.position=t,this.updateAppearance()},t.prototype.updatePosition=function(e){this.position=e},t.prototype.updateAppearance=function(){var e;if(this.tileData){var t=((e={})[s.TileColor.RED]=this.spriteRed,e[s.TileColor.BLUE]=this.spriteBlue,e[s.TileColor.GREEN]=this.spriteGreen,e[s.TileColor.YELLOW]=this.spriteYellow,e[s.TileColor.PURPLE]=this.spritePurple,e)[this.tileData.color];t&&(this.sprite.spriteFrame=t)}},t.prototype.getPosition=function(){return this.position},t.prototype.getTile=function(){return this.tileData},t.prototype.clear=function(){this.tileData=null,this.sprite.spriteFrame=null,this.node.active=!1},t.prototype.highlight=function(e){this.tileData&&(e?(this.node.scale=1.1,this.node.color=cc.Color.YELLOW):(this.node.scale=1,this.node.color=cc.Color.WHITE))},t.prototype.animateExplosion=function(e){var t=this,o=cc.sequence(cc.scaleTo(.1,1.3),cc.fadeOut(.15),cc.callFunc(function(){t.clear(),null==e||e()}));this.resetAnimation(),this.node.runAction(o)},t.prototype.animateDrop=function(e,t,o){void 0===t&&(t=.3),this.node.y=e+300,this.node.opacity=0,this.node.active=!0;var i=cc.sequence(cc.spawn(cc.moveTo(t,this.node.x,e),cc.fadeIn(t)),cc.callFunc(function(){return null==o?void 0:o()}));this.node.runAction(i)},t.prototype.resetAnimation=function(){this.node.stopAllActions(),this.node.scale=1,this.node.color=cc.Color.WHITE,this.node.opacity=255},n([a({type:cc.SpriteFrame,displayName:"Red Sprite"})],t.prototype,"spriteRed",void 0),n([a({type:cc.SpriteFrame,displayName:"Blue Sprite"})],t.prototype,"spriteBlue",void 0),n([a({type:cc.SpriteFrame,displayName:"Green Sprite"})],t.prototype,"spriteGreen",void 0),n([a({type:cc.SpriteFrame,displayName:"Yellow Sprite"})],t.prototype,"spriteYellow",void 0),n([a({type:cc.SpriteFrame,displayName:"Purple Sprite"})],t.prototype,"spritePurple",void 0),n([l],t)}(cc.Component);o.TileView=p,cc._RF.pop()},{"../Core/TileColor":"TileColor"}],TileWithPos:[function(e,t,o){"use strict";cc._RF.push(t,"bdd20QoNw1LRpsq+KK2J5Tn","TileWithPos"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Tile:[function(e,t,o){"use strict";cc._RF.push(t,"aa438c8B/xDmrHt6OtG/ePh","Tile"),Object.defineProperty(o,"__esModule",{value:!0}),o.Tile=void 0;var i=e("./TileColor"),r=function(){function e(e){this.color=e}return e.createRandom=function(){var t=Object.values(i.TileColor);return new e(t[Math.floor(Math.random()*t.length)])},e.prototype.equals=function(e){return this.color===e.color},e}();o.Tile=r,cc._RF.pop()},{"./TileColor":"TileColor"}],UIManager:[function(e,t,o){"use strict";cc._RF.push(t,"3ac700a6q1A6K921uJlLofi","UIManager");var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),n=this&&this.__decorate||function(e,t,o,i){var r,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(s=(n<3?r(s):n>3?r(t,o,s):r(t,o))||s);return n>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.UIManager=void 0;var s=cc._decorator,c=s.ccclass,l=s.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scoreLabel=null,t.targetLabel=null,t.movesLabel=null,t}return r(t,e),t.prototype.updateScore=function(e,t){this.scoreLabel.string=e.toString(),this.targetLabel.string=t.toString()},t.prototype.updateMoves=function(e){this.movesLabel.string=e.toString()},n([l({type:cc.Label,displayName:"Score Label"})],t.prototype,"scoreLabel",void 0),n([l({type:cc.Label,displayName:"Target Label"})],t.prototype,"targetLabel",void 0),n([l({type:cc.Label,displayName:"Moves Label"})],t.prototype,"movesLabel",void 0),n([c],t)}(cc.Component);o.UIManager=a,cc._RF.pop()},{}],WinScreenView:[function(e,t,o){"use strict";cc._RF.push(t,"a105d1UUClHDIs30uHGHZf+","WinScreenView");var i,r=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),n=this&&this.__decorate||function(e,t,o,i){var r,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(s=(n<3?r(s):n>3?r(t,o,s):r(t,o))||s);return n>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0}),o.WinScreenView=void 0;var s=cc._decorator,c=s.ccclass,l=s.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scoreLabel=null,t.playAgainButton=null,t.onPlayAgainCallback=null,t}return r(t,e),t.prototype.onLoad=function(){this.playAgainButton&&this.playAgainButton.node.on(cc.Node.EventType.TOUCH_END,this.onPlayAgainClicked,this)},t.prototype.show=function(e){this.scoreLabel.string=e.toString(),this.node.active=!0},t.prototype.hide=function(){this.node.active=!1},t.prototype.setOnPlayAgain=function(e){this.onPlayAgainCallback=e},t.prototype.onPlayAgainClicked=function(){var e;null===(e=this.onPlayAgainCallback)||void 0===e||e.call(this)},t.prototype.onDestroy=function(){this.playAgainButton&&this.playAgainButton.node.off(cc.Node.EventType.TOUCH_END,this.onPlayAgainClicked,this)},n([l({type:cc.Label,displayName:"Score Label"})],t.prototype,"scoreLabel",void 0),n([l({type:cc.Button,displayName:"Play Again Button"})],t.prototype,"playAgainButton",void 0),n([c],t)}(cc.Component);o.WinScreenView=a,cc._RF.pop()},{}]},{},["Board","BombBooster","TeleportBooster","TeleportModeState","GameConfig","GameRules","Position","Tile","TileColor","TileMovement","TileWithPos","FieldEvents","GameController","BombBoosterPanelView","TeleportBoosterPanelView","TeleportModeRenderer","FieldView","LoseScreenView","TileView","UIManager","WinScreenView"]);